# Figma API 테스트 가이드

## 🎯 목표
"콘트라베이스 3.0.6 로드밸런서 새로 추가되는 기능" 같은 자연어 명령으로 Figma에서 기획서를 가져올 수 있는지 확인합니다.

## 📋 준비사항

### 1. Node.js 설치 확인
```bash
node --version  # v18 이상 권장
```

### 2. 의존성 설치
```bash
cd /Users/taeheerho/Desktop/oke-front-mcp
npm install
```

### 3. Figma Personal Access Token 발급
`FIGMA_TOKEN_SETUP.md` 파일을 참고하여 토큰을 발급받으세요.

### 4. 환경변수 설정
```bash
# 방법 1: .env 파일 생성
echo "FIGMA_TOKEN=figd_여기에_실제_토큰" > .env

# 방법 2: 직접 export (임시)
export FIGMA_TOKEN="figd_여기에_실제_토큰"
```

## 🚀 테스트 실행

```bash
npm run test:figma
```

또는

```bash
node test-figma.js
```

## 📊 예상 결과

### ✅ 성공한 경우:
```
🚀 Figma API 테스트 시작...

📂 1단계: 팀의 프로젝트 목록 조회...
✅ 총 5개의 프로젝트를 찾았습니다:
   1. 콘트라베이스 (ID: xxx)
   2. 다른프로젝트 (ID: yyy)
   ...

🔍 2단계: "콘트라베이스" 프로젝트 검색...
✅ 찾았습니다: 콘트라베이스

📄 3단계: 프로젝트의 파일 목록 조회...
✅ 총 10개의 파일을 찾았습니다:
   1. 콘트라베이스 v3.0.6
   2. 콘트라베이스 v3.0.5
   ...

🔍 4단계: "3.0.6" 버전 파일 검색...
✅ 대상 파일: 콘트라베이스 v3.0.6

📖 5단계: 파일 내용 조회 중...
✅ 파일명: 콘트라베이스 v3.0.6
✅ 버전: 12345
✅ 최종 수정: 2026-01-15

🔍 6단계: "로드밸런서" 관련 내용 검색...

페이지 1: 로드밸런서 신규 기능
   🎯 ===== 로드밸런서 관련 페이지 발견! =====
   
   📝 Description 전체 내용:
   --------------------------------------------------
   [기획 내용]
   - 로드밸런서 설정 화면 추가
   - 헬스체크 기능 구현
   - 트래픽 분산 알고리즘 선택 옵션
   ...
   --------------------------------------------------

✅ 성공! 로드밸런서 관련 기획 내용을 Figma API로 가져올 수 있습니다!
```

### ❌ 오류가 발생한 경우:

#### 403 Forbidden
- **원인**: Token 권한 부족 또는 팀 접근 권한 없음
- **해결**: 
  1. Figma Settings에서 Token Scope 확인
  2. 팀/프로젝트 접근 권한 확인
  3. 회사 이메일 계정으로 로그인했는지 확인

#### 404 Not Found
- **원인**: 팀 ID가 잘못되었거나 존재하지 않음
- **해결**: 
  1. `test-figma.js`의 `TEAM_ID` 확인
  2. Figma URL에서 올바른 팀 ID 복사

#### Token 없음
- **원인**: 환경변수 설정 안됨
- **해결**: `.env` 파일 생성 또는 `export FIGMA_TOKEN="..."` 실행

## 🎓 테스트 결과 해석

### 테스트 성공 시
✅ **MCP 서버에서 구현 가능합니다!**

다음과 같은 사용자 명령을 처리할 수 있습니다:
- "콘트라베이스 3.0.6 로드밸런서 기획 보여줘"
- "버전 3.0.6의 새로운 기능 알려줘"
- "로드밸런서 화면 구조 설명해줘"

### 테스트 실패 시
각 단계에서 어디까지 성공했는지 확인하고:
1. **1단계 실패**: Token 또는 팀 접근 권한 문제
2. **2단계 실패**: 프로젝트 이름이 다름 (출력된 목록 확인)
3. **3단계 실패**: 파일 접근 권한 문제
4. **6단계에서 못 찾음**: Description에 다른 키워드 사용 (파일 구조 확인)

## 📝 다음 단계

테스트가 성공하면:
1. 전체 MCP 서버 구현 시작
2. 다른 데이터 소스(퍼블 레포, Confluence) 통합
3. 자연어 처리 로직 추가
4. Cursor와 연동

## 💡 팁

- 첫 실행 시 시간이 다소 걸릴 수 있습니다 (API 호출이 많음)
- Description이 없는 페이지도 있을 수 있습니다
- 실제 프로젝트/파일 이름이 예상과 다를 수 있으니 출력 결과를 잘 확인하세요
